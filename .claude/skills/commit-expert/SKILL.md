---
name: commit-expert
description: (opencode - Skill) 스마트 커밋 도우미. Conventional Commits 규칙 준수(한글, 개조식, 이모지 금지) 및 main 브랜치 보호 기능을 제공합니다. 커밋 메시지 작성, 브랜치 관리, 자동 스테이징 로직을 포함합니다. "커밋해줘", "commit", "변경사항 저장" 등의 요청 시 사용합니다.
---

# Commit Expert

엄격한 규칙에 따라 Git 커밋을 처리하는 전문가 스킬입니다.

## Workflow

1.  **Git Status 확인**: `git status` 명령어로 현재 상태를 파악하십시오.
2.  **Branch Protection (환경 브랜치 보호)**:
    - 현재 브랜치가 보호된 환경 브랜치인지 확인하십시오: `main`, `master`, `prod`, `dev`, `stag`, `stage`
    - 만약 보호된 브랜치라면, 직접 커밋을 **절대 금지**합니다.
    - 변경 사항을 분석하여 **커밋 타입에 따른 적절한 브랜치**를 제안하십시오:
        - `feat` → `feature/간단한-설명`
        - `fix` → `fix/간단한-설명`
        - `hotfix` → `hotfix/간단한-설명`
        - `refactor` → `refactor/간단한-설명`
        - `docs` → `docs/간단한-설명`
        - `test` → `test/간단한-설명`
        - `chore` → `chore/간단한-설명`
    - **브랜치 생성 전 사용자에게 제안된 브랜치 이름을 보여주고 승인을 받으십시오.**
    - 승인 후 `git checkout -b <branch-name>`으로 브랜치를 생성/이동하십시오.
3.  **Staging Logic**:
    - **스테이징된 파일이 있는 경우**: 해당 파일들만 커밋 대상입니다.
    - **스테이징된 파일이 없는 경우**: `git add .` 명령으로 **모든 변경사항**을 스테이징하십시오. (Untracked files 포함)
4.  **Commit Message 작성**:
    - `git diff --cached` 내용을 분석하여 메시지를 작성하십시오.
    - **형식 (Format)**: Conventional Commits 준수
        - `feat`: 새로운 기능 (Feature)
        - `fix`: 버그 수정 (Bug fix)
        - `refactor`: 리팩토링 (기능 변경 없음)
        - `chore`: 빌드, 패키지 매니저, 문서 등 기타 변경
        - `docs`: 문서 변경
        - `style`: 코드 포맷팅 (로직 변경 없음)
        - `test`: 테스트 코드
    - **언어**: **반드시 한국어 (Korean Only)**
    - **스타일**:
        - **개조식, 명사형 종결** (예: "수정함" (X) -> "수정" (O), "추가했습니다" (X) -> "추가" (O))
        - **이모지 절대 사용 금지**
        - 완전한 문장 사용 지양
    - **길이**: 전체 메시지 **10줄 미만**
    - **구조**:

        ```
        <type>: <summary (명사형)>

        - <detail 1 (명사형)>
        - <detail 2 (명사형)>
        ```

5.  **Execution (실행)**:
    - 작성된 메시지로 `git commit -m "..."`을 실행하십시오.
    - **Push 금지**: 별도의 명시적인 명령("푸시해줘", "배포해줘" 등)이 없다면 `git push`는 **절대 실행하지 마십시오.**

## ⚠️ Important Restrictions

- **`git log` 사용 금지**: 커밋 컨벤션이 이미 정해져 있으므로, 지난 커밋 내역을 확인하여 토큰과 시간을 낭비하지 마십시오. `git diff --cached`로 현재 변경사항만 분석하십시오.

## Examples

### Good Example

```
fix: 로그인 페이지 유효성 검사 오류 수정

- 이메일 정규식 패턴 개선
- 비밀번호 최소 길이 조건 변경 (8자 -> 10자)
- 에러 메시지 가독성 향상
```

### Bad Examples

- `🐛 fix: 로그인 버그 수정했습니다.` (이모지 사용, 존댓말 문장)
- `Update login logic` (영어 사용)
- `로그인 수정` (Type 누락)
- `feat: 로그인 기능을 구현했습니다. 이메일과 비밀번호를 입력받아서 검증하고, JWT 토큰을 발행합니다. 리프레시 토큰도 함께 발행하고, Redis에 저장합니다. 또한 로그인 로그를 기록합니다.` (너무 긴 커밋 메시지)
- `fix: 유효성 검사 오류 수정\n\n로그인 페이지에서 이메일 입력 필드의 유효성 검사가 제대로 작동하지 않는 문제를 발견했습니다. 사용자가 잘못된 형식의 이메일을 입력해도 경고가 표시되지 않아서, 혼란을 야기할 수 있었습니다. 이를 해결하기 위해 정규식 패턴을 개선했습니다.` (줄글로 작성된 Body)
- `feat: 기능 추가` (Type과 Summary가 내용 없이 반복)
